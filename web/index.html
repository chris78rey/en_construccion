<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>da-tica — Ingeniería de datos de misión crítica</title>
  <meta name="description" content="Consultora boutique de alta ingeniería. Soberanía del dato, ultra-baja latencia y Zero Trust para infraestructuras de misión crítica." />
  <meta name="color-scheme" content="dark" />
  <style>
    :root{
      --bg: #050505;
      --panel: rgba(255,255,255,0.04);
      --panel-2: rgba(255,255,255,0.06);
      --text: #e6e6e6;
      --muted: #a6a6a6;
      --dim: #444444;
      --ok: #00ff41;
      --warn: #ff4d00;
      --radius: 14px;
      --shadow: 0 24px 90px rgba(0,0,0,0.6);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      --max: 1120px;
    }

    *{ box-sizing: border-box; }
    html,body{ height: 100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(0,255,65,0.08), transparent 65%),
        radial-gradient(1000px 500px at 90% 10%, rgba(255,77,0,0.10), transparent 70%),
        var(--bg);
      color: var(--text);
      font-family: var(--sans);
      line-height: 1.45;
      letter-spacing: 0.2px;
    }

    a{ color: inherit; }
    a:focus-visible, button:focus-visible, summary:focus-visible{
      outline: 2px solid var(--ok);
      outline-offset: 3px;
      border-radius: 10px;
    }

    .skip{
      position:absolute;
      top:-40px;
      left: 12px;
      padding: 10px 12px;
      background: var(--panel-2);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      text-decoration:none;
      font-family: var(--mono);
    }
    .skip:focus{ top: 12px; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 22px 18px 48px;
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(14px);
      background: rgba(5,5,5,0.6);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .topbar-inner{
      max-width: var(--max);
      margin: 0 auto;
      padding: 14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      text-decoration:none;
      min-width: 220px;
    }

    .mark{
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(0,255,65,0.18), rgba(255,77,0,0.20));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 10px 36px rgba(0,0,0,0.45);
      display:grid;
      place-items:center;
      font-family: var(--mono);
      font-weight: 800;
      letter-spacing: 0.5px;
    }

    .brand strong{
      display:block;
      font-family: var(--mono);
      font-size: 14px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
    }
    .brand small{
      display:block;
      color: var(--muted);
      font-size: 12px;
    }

    nav{
      display:flex;
      gap: 4px;
      align-items:center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .navlink{
      padding: 10px 10px;
      border-radius: 12px;
      text-decoration:none;
      color: var(--muted);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      border: 1px solid transparent;
    }

    .navlink:hover{
      color: var(--text);
      background: rgba(255,255,255,0.04);
    }

    .navlink[aria-current="page"]{
      color: var(--text);
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.08);
    }

    .cta{
      padding: 10px 12px;
      border-radius: 12px;
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      border: 1px solid rgba(0,255,65,0.25);
      background: rgba(0,255,65,0.08);
      color: var(--text);
      cursor:pointer;
    }
    .cta:hover{ background: rgba(0,255,65,0.12); }

    .section{
      padding: 26px 0;
      scroll-margin-top: 86px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
      align-items: stretch;
    }

    .panel{
      background: var(--panel);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .kernel{
      padding-top: 18px;
    }

    .kernel-left{
      grid-column: span 7;
      padding: 22px;
    }

    .kernel-right{
      grid-column: span 5;
      padding: 22px;
      display:grid;
      gap: 10px;
    }

    .kicker{
      color: var(--ok);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      margin: 0 0 10px;
    }

    h1{
      margin: 0 0 12px;
      font-family: var(--mono);
      font-weight: 800;
      font-size: clamp(30px, 4vw, 44px);
      letter-spacing: 0.6px;
      text-transform: uppercase;
    }

    .cursor{
      display:inline-block;
      width: 10px;
      margin-left: 4px;
      color: var(--ok);
      animation: blink 1s steps(1, end) infinite;
    }

    @keyframes blink { 50% { opacity: 0; } }

    .lead{
      margin: 0 0 18px;
      color: var(--muted);
      max-width: 62ch;
      font-size: 15px;
    }

    .hero-dynamic{
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items:center;
    }

    .chip{
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.5px;
      color: var(--text);
    }

    .chip strong{ color: var(--ok); }

    .kernel-right .mini{
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
      font-family: var(--mono);
    }

    .mini .label{
      color: var(--muted);
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
    }

    .mini .value{
      margin-top: 6px;
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.4px;
    }

    h2{
      margin: 0 0 10px;
      font-family: var(--mono);
      letter-spacing: 0.7px;
      text-transform: uppercase;
      font-size: 16px;
    }

    .muted{ color: var(--muted); }

    .telemetry-grid{
      grid-column: span 12;
      padding: 18px;
    }

    .metrics{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-top: 12px;
    }

    .metric{
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
    }

    .metric .num{
      font-family: var(--mono);
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.4px;
    }
    .metric .num .unit{ color: var(--muted); font-weight: 700; font-size: 12px; }
    .metric .desc{ margin-top: 8px; color: var(--muted); font-size: 13px; }

    .arch{
      grid-column: span 12;
      padding: 18px;
    }

    .pillars{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 12px;
    }

    details.pillar{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
      overflow: hidden;
    }

    details.pillar[open]{
      background: rgba(255,255,255,0.045);
      border-color: rgba(0,255,65,0.22);
    }

    details.pillar summary{
      list-style: none;
      cursor: pointer;
      padding: 16px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }

    details.pillar summary::-webkit-details-marker{ display:none; }

    .p-title{
      font-family: var(--mono);
      letter-spacing: 0.7px;
      text-transform: uppercase;
      font-weight: 800;
      font-size: 13px;
    }

    .p-sub{ color: var(--muted); font-size: 13px; margin-top: 6px; }

    .p-badge{
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      border-radius: 999px;
      padding: 8px 10px;
      border: 1px solid rgba(255,255,255,0.10);
      color: var(--muted);
      background: rgba(255,255,255,0.02);
      white-space: nowrap;
    }

    .p-body{
      padding: 0 16px 16px;
      color: var(--muted);
      font-size: 13px;
    }

    .p-body ul{ margin: 10px 0 0 18px; padding: 0; }
    .p-body li{ margin: 6px 0; }

    .terminal{
      grid-column: span 12;
      padding: 18px;
    }

    .cli{
      margin-top: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.35);
      overflow:hidden;
    }

    .cli-header{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      font-family: var(--mono);
      color: var(--muted);
      font-size: 12px;
      letter-spacing: 0.6px;
      text-transform: uppercase;
    }

    .cli-body{
      padding: 14px;
      display:grid;
      gap: 12px;
    }

    .alerts{
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .alert-btn{
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.03);
      color: var(--text);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.5px;
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
    }

    .alert-btn[data-level="warn"]{ border-color: rgba(255,77,0,0.25); }
    .alert-btn:hover{ background: rgba(255,255,255,0.05); }

    .log{
      min-height: 170px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(5,5,5,0.55);
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      overflow:auto;
    }

    .log .line{ margin: 0 0 8px; }
    .log .ok{ color: var(--ok); }
    .log .warn{ color: var(--warn); }

    footer{
      margin-top: 30px;
      padding-top: 18px;
      border-top: 1px solid rgba(255,255,255,0.08);
      display:flex;
      flex-wrap: wrap;
      gap: 14px;
      align-items:flex-start;
      justify-content:space-between;
    }

    footer .meta{
      color: var(--muted);
      font-size: 12px;
      font-family: var(--mono);
      letter-spacing: 0.4px;
    }

    .links{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .links a{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.4px;
      color: var(--muted);
      text-decoration:none;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.02);
      padding: 9px 10px;
      border-radius: 12px;
    }

    .links a:hover{ color: var(--text); background: rgba(255,255,255,0.04); }

    @media (max-width: 980px){
      .kernel-left{ grid-column: span 12; }
      .kernel-right{ grid-column: span 12; }
      .metrics{ grid-template-columns: repeat(2, 1fr); }
      .pillars{ grid-template-columns: 1fr; }
      .brand{ min-width: auto; }
    }

    @media (prefers-reduced-motion: reduce){
      .cursor{ animation: none; }
    }
  </style>
</head>
<body>
  <a class="skip" href="#kernel">Saltar al contenido</a>

  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <a class="brand" href="#kernel" aria-label="Ir a inicio">
        <div class="mark" aria-hidden="true">DT</div>
        <div>
          <strong>da-tica</strong>
          <small>Alta ingeniería • Soberanía del dato</small>
        </div>
      </a>

      <nav aria-label="Secciones">
        <a class="navlink" href="#kernel" data-spy="kernel">Kernel</a>
        <a class="navlink" href="#telemetry" data-spy="telemetry">Telemetría</a>
        <a class="navlink" href="#architecture" data-spy="architecture">Arquitectura</a>
        <a class="navlink" href="#diagnostics" data-spy="diagnostics">Diagnóstico</a>
        <button class="cta" type="button" id="cta-uplink">Uplink</button>
      </nav>
    </div>
  </header>

  <main class="wrap" id="main" role="main">
    <section class="section kernel" id="kernel" aria-labelledby="kernel-title">
      <div class="grid">
        <div class="panel kernel-left">
          <p class="kicker">Resonant Stark / 2026</p>
          <h1 id="kernel-title">LATENCY IS A CHOICE<span class="cursor" aria-hidden="true">█</span></h1>
          <p class="lead">
            Somos una consultora boutique de alta ingeniería para infraestructuras de misión crítica.
            Eliminamos latencia técnica y recuperamos la soberanía del dato con un enfoque determinístico:
            disponibilidad, integridad y rendimiento medible.
          </p>

          <div class="hero-dynamic" aria-label="Capacidades clave">
            <span class="chip"><strong id="hero-dynamic">SOBERANÍA</strong> DEL DATO</span>
            <span class="chip">ULTRA-BAJA LATENCIA</span>
            <span class="chip">ZERO TRUST</span>
            <span class="chip">ORACLE RAC / ADG</span>
            <span class="chip">RUST NATIVE</span>
          </div>
        </div>

        <aside class="panel kernel-right" aria-label="Estado operativo">
          <div class="mini">
            <div class="label">Objetivo disponibilidad</div>
            <div class="value"><span class="ok">99.9%</span></div>
          </div>
          <div class="mini">
            <div class="label">Latencia objetivo</div>
            <div class="value">&lt; <span class="ok">50ms</span></div>
          </div>
          <div class="mini">
            <div class="label">Modelo</div>
            <div class="value">Boutique premium</div>
          </div>
          <div class="mini">
            <div class="label">Superficie de ataque</div>
            <div class="value">Sitio estático</div>
          </div>
        </aside>
      </div>
    </section>

    <section class="section" id="telemetry" aria-labelledby="telemetry-title">
      <div class="grid">
        <div class="panel telemetry-grid">
          <h2 id="telemetry-title">Telemetría (prueba social)</h2>
          <p class="muted">Métricas como evidencia. Sin adjetivos. Solo señales.</p>

          <div class="metrics" role="list">
            <div class="metric" role="listitem">
              <div class="num"><span data-counter="325000" data-format="int">0</span> <span class="unit">tx / 40s</span></div>
              <div class="desc">PL/SQL optimizado en cargas masivas</div>
            </div>
            <div class="metric" role="listitem">
              <div class="num"><span data-counter="1200000" data-format="int">0</span> <span class="unit">usuarios simultáneos</span></div>
              <div class="desc">Escalabilidad nacional en plataformas críticas</div>
            </div>
            <div class="metric" role="listitem">
              <div class="num"><span data-counter="99.9" data-format="dec1">0</span> <span class="unit">% continuidad</span></div>
              <div class="desc">Resiliencia con RAC + Active Data Guard</div>
            </div>
            <div class="metric" role="listitem">
              <div class="num"><span data-counter="20" data-format="int">0</span><span class="unit">+ años</span></div>
              <div class="desc">Defensa, banca y salud pública</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="architecture" aria-labelledby="architecture-title">
      <div class="grid">
        <div class="panel arch">
          <h2 id="architecture-title">Arquitectura de servicios</h2>
          <p class="muted">Cuatro pilares productizados para eliminar incertidumbre operativa.</p>

          <div class="pillars">
            <details class="pillar">
              <summary>
                <div>
                  <div class="p-title">Legacy Mutation</div>
                  <div class="p-sub">Monolito → alta disponibilidad (Oracle RAC)</div>
                </div>
                <span class="p-badge">ACID + vector</span>
              </summary>
              <div class="p-body">
                Evolución hacia arquitecturas de alta disponibilidad. Búsqueda vectorial dentro del perímetro ACID para evitar silos.
                <ul>
                  <li>RAC / ADG para continuidad operativa</li>
                  <li>Controles por roles para soberanía</li>
                  <li>Plan de modernización sin downtime innecesario</li>
                </ul>
              </div>
            </details>

            <details class="pillar">
              <summary>
                <div>
                  <div class="p-title">Rust Precision</div>
                  <div class="p-sub">Ultra-baja latencia, eficiencia determinística</div>
                </div>
                <span class="p-badge">&lt;50ms</span>
              </summary>
              <div class="p-body">
                Reescritura selectiva de microservicios críticos en Rust para eliminar pausas del GC y reducir RAM/CPU.
                <ul>
                  <li>Hasta 4x reducción de consumo de RAM</li>
                  <li>Latencias predecibles (SLOs reales)</li>
                  <li>Seguridad de memoria como baseline</li>
                </ul>
              </div>
            </details>

            <details class="pillar">
              <summary>
                <div>
                  <div class="p-title">Sovereign AI (RAG)</div>
                  <div class="p-sub">IA explicable, auditada y bajo control</div>
                </div>
                <span class="p-badge">RAG 3 niveles</span>
              </summary>
              <div class="p-body">
                Arquitectura RAG con pre-filtrado, in-filtrado y post-filtrado. El dato no sale de tu perímetro.
                <ul>
                  <li>Pre-filtrado por roles (control de acceso)</li>
                  <li>In-filtrado por similitud (índices HNSW/IVF)</li>
                  <li>Post-filtrado por reglas de negocio</li>
                </ul>
              </div>
            </details>

            <details class="pillar">
              <summary>
                <div>
                  <div class="p-title">C-Suite Governance</div>
                  <div class="p-sub">Auditoría proactiva y monitoreo continuo</div>
                </div>
                <span class="p-badge">CCM</span>
              </summary>
              <div class="p-body">
                Gobernanza y auditoría automatizada para reducir riesgo legal y costo de cumplimiento.
                <ul>
                  <li>KNIME para monitoreo continuo (CCM)</li>
                  <li>Ley de Benford para anomalías a escala</li>
                  <li>Anonimización y trazabilidad (privacy by design)</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="diagnostics" aria-labelledby="diagnostics-title">
      <div class="grid">
        <div class="panel terminal">
          <h2 id="diagnostics-title">Terminal de diagnóstico (demo)</h2>
          <p class="muted">Simulación local: no envía datos, no usa APIs.</p>

          <div class="cli" role="region" aria-label="Consola de diagnóstico">
            <div class="cli-header">
              <span>da-tica@ops — run: diagnostics</span>
              <span id="cli-status">idle</span>
            </div>
            <div class="cli-body">
              <div class="alerts" aria-label="Alertas">
                <button class="alert-btn" type="button" data-alert="HIGH_LATENCY" data-level="warn">[WARN] HIGH_LATENCY</button>
                <button class="alert-btn" type="button" data-alert="CLOUD_OPEX" data-level="warn">[WARN] CLOUD_OPEX</button>
                <button class="alert-btn" type="button" data-alert="COMPLIANCE_RISK" data-level="warn">[WARN] COMPLIANCE_RISK</button>
                <button class="alert-btn" type="button" data-alert="LEGACY_MONOLITH">[INFO] LEGACY_MONOLITH</button>
                <button class="alert-btn" type="button" data-alert="RAG_SILO">[INFO] RAG_SILO</button>
                <button class="alert-btn" type="button" id="cli-clear">CLEAR</button>
              </div>

              <div class="log" id="cli-log" aria-live="polite" aria-relevant="additions" aria-label="Salida">
                <p class="line"><span class="ok">$</span> Selecciona una alerta para ver un diagnóstico.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer id="uplink" role="contentinfo">
      <div class="meta">
        © <span id="year"></span> da-tica — continuidad operativa • integridad absoluta • eficiencia determinística
      </div>
      <div class="links" aria-label="Enlaces">
        <a href="mailto:hello@da-tica.example">EMAIL: hello@da-tica.example</a>
        <a href="#kernel">UPLINK: /kernel</a>
        <a href="#architecture">DOC: /architecture</a>
      </div>
    </footer>
  </main>

  <noscript>
    <div class="wrap" style="padding-top: 0;">
      <div class="panel" style="padding: 14px; font-family: var(--mono); color: var(--muted);">
        JavaScript está deshabilitado. El sitio sigue siendo legible, pero sin animaciones/diagnóstico.
      </div>
    </div>
  </noscript>

  <script>
    (function(){
      const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const year = document.getElementById('year');
      if(year) year.textContent = String(new Date().getFullYear());

      // CTA
      const ctaUplink = document.getElementById('cta-uplink');
      if(ctaUplink){
        ctaUplink.addEventListener('click', () => {
          const el = document.getElementById('uplink');
          if(el) el.scrollIntoView({behavior: reduceMotion ? 'auto' : 'smooth'});
        });
      }

      // Scroll-spy nav
      const navLinks = Array.from(document.querySelectorAll('a.navlink[data-spy]'));
      const sections = navLinks
        .map(a => document.getElementById(String(a.getAttribute('data-spy'))))
        .filter(Boolean);

      function setCurrent(id){
        navLinks.forEach(a => {
          const active = a.getAttribute('data-spy') === id;
          if(active){
            a.setAttribute('aria-current','page');
          } else {
            a.removeAttribute('aria-current');
          }
        });
      }

      if('IntersectionObserver' in window && sections.length){
        const spy = new IntersectionObserver((entries) => {
          const visible = entries
            .filter(e => e.isIntersecting)
            .sort((a,b) => (b.intersectionRatio - a.intersectionRatio));
          if(visible[0] && visible[0].target && visible[0].target.id){
            setCurrent(visible[0].target.id);
          }
        }, { root: null, threshold: [0.2, 0.35, 0.5, 0.65] });

        sections.forEach(s => spy.observe(s));
      }

      // Hero typewriter loop: rotate the key word
      const heroDynamic = document.getElementById('hero-dynamic');
      const heroWords = ['SOBERANÍA', 'VELOCIDAD', 'ZERO TRUST', 'INTEGRIDAD', 'DETERMINISMO'];

      function typewriter(el, words){
        if(!el || !words.length) return;
        let wordIndex = 0;
        let charIndex = 0;
        let deleting = false;

        function tick(){
          const current = words[wordIndex];
          if(!deleting){
            charIndex = Math.min(charIndex + 1, current.length);
          } else {
            charIndex = Math.max(charIndex - 1, 0);
          }

          el.textContent = current.slice(0, charIndex);

          const doneTyping = (!deleting && charIndex === current.length);
          const doneDeleting = (deleting && charIndex === 0);

          let delay = deleting ? 34 : 46;
          if(doneTyping) delay = 980;
          if(doneDeleting) delay = 320;

          if(doneTyping) deleting = true;
          if(doneDeleting){
            deleting = false;
            wordIndex = (wordIndex + 1) % words.length;
          }

          window.setTimeout(tick, delay);
        }

        tick();
      }

      if(!reduceMotion){
        typewriter(heroDynamic, heroWords);
      }

      // Metric roller
      function formatCounter(value, format){
        if(format === 'dec1'){
          return new Intl.NumberFormat('es-ES', {minimumFractionDigits: 1, maximumFractionDigits: 1}).format(value);
        }
        return new Intl.NumberFormat('es-ES').format(Math.round(value));
      }

      function animateCounters(){
        const nodes = Array.from(document.querySelectorAll('[data-counter]'));
        nodes.forEach((n) => {
          const raw = String(n.getAttribute('data-counter') || '0');
          const format = String(n.getAttribute('data-format') || 'int');
          const target = Number(raw);
          if(!Number.isFinite(target)) return;

          const start = performance.now();
          const duration = 1200;

          function step(now){
            const t = Math.min(1, (now - start) / duration);
            const eased = 1 - Math.pow(1 - t, 3);
            const current = (target * eased);
            n.textContent = formatCounter(current, format);
            if(t < 1) requestAnimationFrame(step);
          }

          requestAnimationFrame(step);
        });
      }

      const telemetry = document.getElementById('telemetry');
      if(telemetry && 'IntersectionObserver' in window){
        let ran = false;
        const obs = new IntersectionObserver((entries) => {
          if(ran) return;
          if(entries.some(e => e.isIntersecting)){
            ran = true;
            if(reduceMotion){
              // Set final values immediately
              document.querySelectorAll('[data-counter]').forEach((n) => {
                const raw = String(n.getAttribute('data-counter') || '0');
                const format = String(n.getAttribute('data-format') || 'int');
                const target = Number(raw);
                if(!Number.isFinite(target)) return;
                n.textContent = formatCounter(target, format);
              });
            } else {
              animateCounters();
            }
          }
        }, { threshold: 0.25 });

        obs.observe(telemetry);
      } else {
        // Fallback: show final values
        document.querySelectorAll('[data-counter]').forEach((n) => {
          const raw = String(n.getAttribute('data-counter') || '0');
          const format = String(n.getAttribute('data-format') || 'int');
          const target = Number(raw);
          if(!Number.isFinite(target)) return;
          n.textContent = formatCounter(target, format);
        });
      }

      // Diagnostic terminal
      const logEl = document.getElementById('cli-log');
      const statusEl = document.getElementById('cli-status');
      const clearBtn = document.getElementById('cli-clear');

      function appendLine(text, level){
        if(!logEl) return;
        const p = document.createElement('p');
        p.className = 'line' + (level ? (' ' + level) : '');
        p.textContent = text;
        logEl.appendChild(p);
        logEl.scrollTop = logEl.scrollHeight;
      }

      function setStatus(s){
        if(statusEl) statusEl.textContent = s;
      }

      const playbooks = {
        HIGH_LATENCY: [
          {t: '$ ANALYZING… DETECTED: tail latency + GC pauses', level: 'warn'},
          {t: '> RECOMMENDATION: Rust rewrite (hot path) + SLO budget', level: 'ok'},
          {t: '> EXPECTED: <50ms p95, CPU/RAM reduction', level: 'ok'}
        ],
        CLOUD_OPEX: [
          {t: '$ ANALYZING… DETECTED: low density / inefficient runtime', level: 'warn'},
          {t: '> RECOMMENDATION: Rust services + right-sizing + caching policy', level: 'ok'},
          {t: '> OUTCOME: OPEX down, predictable scaling', level: 'ok'}
        ],
        COMPLIANCE_RISK: [
          {t: '$ ANALYZING… DETECTED: audit gaps / sensitive data exposure', level: 'warn'},
          {t: '> RECOMMENDATION: CCM (KNIME) + anonymization + Zero Trust data layer', level: 'ok'},
          {t: '> OUTCOME: faster audits, reduced legal risk', level: 'ok'}
        ],
        LEGACY_MONOLITH: [
          {t: '$ ANALYZING… DETECTED: Oracle core + legacy monolith', level: ''},
          {t: '> RECOMMENDATION: RAC / ADG path + vector search inside ACID boundary', level: 'ok'},
          {t: '> OUTCOME: continuity + future-proof AI', level: 'ok'}
        ],
        RAG_SILO: [
          {t: '$ ANALYZING… DETECTED: fragmented vector DB / policy drift', level: ''},
          {t: '> RECOMMENDATION: Sovereign RAG (pre/in/post filtration)', level: 'ok'},
          {t: '> OUTCOME: explainable AI, governance preserved', level: 'ok'}
        ]
      };

      function runAlert(key){
        const plan = playbooks[key];
        if(!plan) return;

        setStatus('running');
        appendLine('$ RUN ' + key, '');

        let i = 0;
        function next(){
          const step = plan[i];
          if(!step){
            setStatus('idle');
            appendLine('> DONE', 'ok');
            return;
          }
          appendLine(step.t, step.level);
          i += 1;
          window.setTimeout(next, reduceMotion ? 0 : 420);
        }
        next();
      }

      document.querySelectorAll('button.alert-btn[data-alert]').forEach((btn) => {
        btn.addEventListener('click', () => {
          const key = String(btn.getAttribute('data-alert') || '');
          runAlert(key);
        });
      });

      if(clearBtn){
        clearBtn.addEventListener('click', () => {
          if(!logEl) return;
          logEl.innerHTML = '';
          appendLine('$ READY', 'ok');
          setStatus('idle');
        });
      }

      setCurrent('kernel');
    })();
  </script>
</body>
</html>